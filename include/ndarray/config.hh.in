#ifndef _NDARRAY_CONFIG_HH
#define _NDARRAY_CONFIG_HH

#define NDARRAY_VERSION "${NDARRAY_VERSION}"

#cmakedefine NDARRAY_HAVE_ADIOS2 1
#cmakedefine NDARRAY_HAVE_CUDA 1
#cmakedefine NDARRAY_HAVE_EIGEN 1
#cmakedefine NDARRAY_HAVE_HDF5 1
#cmakedefine NDARRAY_HAVE_HIP 1
#cmakedefine NDARRAY_HAVE_MPI 1
#cmakedefine NDARRAY_HAVE_NETCDF 1
#cmakedefine NDARRAY_HAVE_NETCDF_PARALLEL 1
#cmakedefine NDARRAY_HAVE_OPENMP 1
#cmakedefine NDARRAY_HAVE_PNETCDF 1
#cmakedefine NDARRAY_HAVE_PNG 1
#cmakedefine NDARRAY_HAVE_VTK 1
#cmakedefine NDARRAY_HAVE_XTENSOR 1
#cmakedefine NDARRAY_HAVE_YAML 1

#cmakedefine NDARRAY_USE_BIG_ENDIAN 1
#cmakedefine NDARRAY_USE_LITTLE_ENDIAN 1

#if NDARRAY_HAVE_MPI
#else
  typedef int MPI_Comm;
#define MPI_COMM_WORLD 0x44000000
#define MPI_COMM_SELF 0x44000001
#endif

#ifdef __CUDACC__
// #define NDARRAY_NUMERIC_FUNC __device__ __host__
#else
// #define NDARRAY_NUMERIC_FUNC
#define __device__
#define __host__
#endif

// Error handling macros for NetCDF/PNetCDF
// Note: These macros require <ndarray/error.hh> to be included first
// Most users should include <ndarray/ndarray.hh> which includes everything

#define NC_SAFE_CALL(call) \
  do { \
    int retval = (call); \
    if (retval != 0) { \
      std::string error_msg = std::string(nc_strerror(retval)) + \
                              " at " + __FILE__ + ":" + std::to_string(__LINE__); \
      throw ::ftk::netcdf_error(::ftk::ERR_NETCDF_IO, error_msg); \
    } \
  } while (0)

#define PNC_SAFE_CALL(call) \
  do { \
    int retval = (call); \
    if (retval != 0) { \
      std::string error_msg = std::string(ncmpi_strerror(retval)) + \
                              " at " + __FILE__ + ":" + std::to_string(__LINE__); \
      throw ::ftk::netcdf_error(::ftk::ERR_PNETCDF_IO, error_msg); \
    } \
  } while (0)

#endif
